<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

   <mat-form-field style="width:100%">
                <input matInput [(ngModel)]="wipRecipe.name" (keyup.enter)="setRecipeName($event)" class="textfield" id="editName" name="recipeName" value="recipeName" placeholder="Add recipe name" />
    </mat-form-field>

<div class="flex-container" id="types">

<div class="step">
    <h2>Steps</h2>
    <div cdkDropList #todoList="cdkDropList" id="step" [cdkDropListData]="steps" class="example-list" (cdkDropListDropped)="drop(wipRecipe.steps,$event)">
        <div  class="example-box" *ngFor="let item of wipRecipe.steps;  let i=index" cdkDrag>{{i+1}}. {{item.description}}
                <div  class="flex-container">
                    <div>
                    <i (click)="deleteElement(wipRecipe.steps,i)"  class="far fa-trash-alt" style="padding: 2px"></i>
                    <mat-icon (click)="editStep(i)" style="padding: 2px">edit</mat-icon>
                    </div>
                    <form>
                        <div id="commentIn" type="text" value="" keyup.enter="submitComment($event)"></div>
                    </form>
                </div>
            </div>
        <div>
            <mat-form-field style="width:100%">
                <input matInput [(ngModel)]="tmpStep" (keyup.enter)="addStep(tmpStep);tmpStep=''" class="textfield" name="tmpStep" placeholder="Add a new step" />
            </mat-form-field>
        </div>
    </div>
    </div>


    <div class="ingredient">
        <h2>Ingredients</h2>
        <div cdkDropList #todoList="cdkDropList" id="ingredient" [cdkDropListData]="ingredients" class="example-list" (cdkDropListDropped)="drop(ingredients,$event)">
            <div class="example-box" *ngFor="let item of ingredients;  let i=index" cdkDrag>{{item.name}}
                    <div class="flex-container">
                        <div>
                        <i (click)="deleteElement(ingredients,i)"  class="far fa-trash-alt" style="padding: 2px"></i>
                        <mat-icon (click)="editIngredient(i)" style="padding: 2px">edit</mat-icon>
                        </div>
                        <form>
                            <div id="commentIn" type="text" value="" keyup.enter="submitComment($event)"></div>
                        </form>
                    </div>
                </div>
            <div>
                <mat-form-field style="width:100%">
                    <input matInput [(ngModel)]="tmpIngredient" (keyup.enter)="addIngredient(tmpIngredient);tmpIngredient=''" class="textfield" name="tmpIngredient" placeholder="Add a new ingredient" />
                </mat-form-field>
            </div>
        </div>

    </div>

    <div class="equipment">
        <h2>Equipment</h2>
        <div cdkDropList #todoList="cdkDropList" id="equipments" [cdkDropListData]="equipments" class="example-list" (cdkDropListDropped)="drop(equipments,$event)">
            <div class="example-box" *ngFor="let item of equipments;  let i=index" cdkDrag>{{item.name}}
                    <div class="flex-container">
                        
                        <div>
                        <i (click)="deleteElement(equipments,i)"  class="far fa-trash-alt" style="padding: 2px"></i>
                        <mat-icon (click)="editEquipment(i)" style="padding: 2px">edit</mat-icon>
                        </div>
                        <form>
                            <div id="commentIn" type="text" value="" keyup.enter="submitComment($event)"></div>
                        </form>
                    </div>
                </div>
            <div>
                <mat-form-field style="width:100%">
                    <input matInput [(ngModel)]="tmpEquipment" (keyup.enter)="addEquipment(tmpEquipment);tmpEquipment=''" class="textfield" name="tmpEquipment" placeholder="Add a new equipment" />
                </mat-form-field>
            </div>
        </div>

    </div>
    


    
</div>
<mat-form-field class="example-full-width" style="width:100%">
    <textarea [(ngModel)]="wipRecipe.commitMsg" name="wipRecipe.commitMsg" matInput placeholder="Leave a comment"></textarea>
</mat-form-field>
<button mat-raised-button color="primary" (click)="saveRecipe()" >Save</button>
   
<div id="editStep" class="modal">
  
  <form class="modal-content animate" #userlogin = "ngForm"  >
    <div class="imgcontainer">
      <span onclick="document.getElementById('editStep').style.display='none'" class="close" title="Close Modal">&times;</span>
    </div>

    <div class="container">
        <mat-form-field class="example-full-width" style="width:100%">
            <textarea [(ngModel)]="editSteptmp" name="editSteptmp" matInput placeholder="Step description"></textarea>
        </mat-form-field>
      <button mat-raised-button color="primary" (click)="saveStep()" >Save Edit</button>
    </div>

    <div class="container" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('editStep').style.display='none'" class="cancelbtn">Cancel</button>
    </div>
  </form>
</div>

<div id="editIngredient" class="modal">
  
  <form class="modal-content animate" #userlogin = "ngForm"  >
    <div class="imgcontainer">
      <span onclick="document.getElementById('editIngredient').style.display='none'" class="close" title="Close Modal">&times;</span>
    </div>

    <div class="container">
        <mat-form-field class="example-full-width" style="width:100%">
            <textarea [(ngModel)]="editIngredienttmp" name="editIngredienttmp" matInput placeholder="Ingredient description"></textarea>
        </mat-form-field>
      <button mat-raised-button color="primary" (click)="saveIngredient()" >Save Edit</button>
    </div>

    <div class="container" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('editIngredient').style.display='none'" class="cancelbtn">Cancel</button>
    </div>
  </form>
</div>

<div id="editEquipment" class="modal">
  
  <form class="modal-content animate" #userlogin = "ngForm"  >
    <div class="imgcontainer">
      <span onclick="document.getElementById('editEquipment').style.display='none'" class="close" title="Close Modal">&times;</span>
    </div>

    <div class="container">
        <mat-form-field class="example-full-width" style="width:100%">
            <textarea [(ngModel)]="editEquipmenttmp" name="editEquipmenttmp" matInput placeholder="Leave a comment"></textarea>
        </mat-form-field>
      <button mat-raised-button color="primary" (click)="saveEquipment()" >Save Edit</button>
    </div>

    <div class="container" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('editEquipment').style.display='none'" class="cancelbtn">Cancel</button>
    </div>
  </form>
</div>


<script>
// Get the modal
var modal = document.getElementById('editStep');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
var modal1 = document.getElementById('editIngredient');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal1) {
        modal1.style.display = "none";
    }
}
var modal2 = document.getElementById('editEquipment');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal2) {
        modal2.style.display = "none";
    }
}
</script>
